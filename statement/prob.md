Please refer to [NTU COOL]().

## Subtasks

### Subtask 1 (10 pts)

* $1 \leq N \leq 10^3$
* `mode` = 1

### Subtask 2 (20 pts)

* $1 \leq N \leq 10^5$
* `mode` = 1

### Subtask 3 (10 pts)

* $1 \leq N \leq 10^3$
* `mode` = 2
* The test case in this subtask is the same as in subtask 1; the only difference is the `mode`.

### Subtask 4 (20 pts)

* $1 \leq N \leq 10^5$
* `mode` = 2
* The test case in this subtask is the same as in subtask 2; the only difference is the `mode`.

### Subtask 5 (10 pts)

* $1 \leq N \leq 10^3$
* `mode` = 3
* The test case in this subtask is the same as in subtask 1; the only difference is the `mode`.

### Subtask 6 (30 pts)

* $1 \leq N \leq 10^5$
* `mode` = 3
* The test case in this subtask is the same as in subtask 2; the only difference is the `mode`.


## Sample Testcases

### Sample Input 1
```
4 4 1
0 1
0 2
1 2
0 3
```
### Sample Output 1
```
1
0 
```

### Sample Input 2
```
4 4 2
0 1
0 2
1 2
0 3
```

### Sample Output 2
```
1
```

### Sample Input 3
```
4 4 3
0 1
0 2
1 2
0 3
```

### Sample Output 3
```
2
0 1 2
0 3
```

### Sample Input 4
```
14 16 1
0 2
0 1
1 3
2 3
3 4
4 5
5 6
6 12
6 7
6 8
8 9
8 10
10 11
11 13
11 12
12 13
```
### Sample Output 4
```
5
3 4 5 6 8 
```

### Sample Input 5
```
14 16 2
0 2
0 1
1 3
2 3
3 4
4 5
5 6
6 12
6 7
6 8
8 9
8 10
10 11
11 13
11 12
12 13
```

### Sample Output 5
```
5
```

### Sample Input 6
```
14 16 3
0 2
0 1
1 3
2 3
3 4
4 5
5 6
6 12
6 7
6 8
8 9
8 10
10 11
11 13
11 12
12 13
```

### Sample Output 6
```
7
0 1 2 3
3 4
4 5
5 6
6 7
6 8 10 11 12 13
8 9
```
